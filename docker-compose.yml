#version: "3.9"

services:
  db:
    image: postgres:16
    environment:
      # Définir l'utilisateur, le mot de passe et le nom de la base
      POSTGRES_USER: demo
      POSTGRES_PASSWORD: demo
      POSTGRES_DB: demo
    ports:
      # Exposer le port PostgreSQL vers l'hôte
      - "5432:5432"

  api:
    # Construire l'image à partir du Dockerfile dans ./api
    build: ./api
    ports:
      # Exposer le port 8000 du conteneur vers l'hôte
      - "8000:8000"
    depends_on:
      # Indiquer que l'API dépend de la base de données
      - db
